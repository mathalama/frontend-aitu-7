<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Bouncing Ball</title>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <style>
      .stage {
        width: 700px;
        height: 350px;
        border: 2px solid #333;
        margin: 20px auto;
        position: relative;
        overflow: hidden;
      }
      .ball {
        width: 50px;
        height: 50px;
        border-radius: 50%;
        background: tomato;
        position: absolute;
        left: 0;
        top: 0;
      }
      .controls {
        max-width: 700px;
        margin: 0 auto;
        display: flex;
        gap: 10px;
      }
    </style>
  </head>
  <body>
    <div class="stage">
      <div class="ball" id="ball"></div>
    </div>
    <div class="controls">
      <button id="start">Start</button>
      <button id="stop">Stop</button>
      <button id="reset">Reset</button>
    </div>

    <script>
      $(function () {
        const $b = $("#ball"),
          $stage = $(".stage");
        let vx = 3,
          vy = 2.5,
          timer = null;

        function tick() {
          const x = $b.position().left,
            y = $b.position().top;
          const maxX = $stage.width() - $b.width();
          const maxY = $stage.height() - $b.height();

          let nx = x + vx,
            ny = y + vy;
          if (nx <= 0 || nx >= maxX) {
            vx = -vx;
            nx = Math.max(0, Math.min(nx, maxX));
          }
          if (ny <= 0 || ny >= maxY) {
            vy = -vy;
            ny = Math.max(0, Math.min(ny, maxY));
          }

          $b.css({ left: nx, top: ny });
        }

        $("#start").on("click", function () {
          if (!timer) timer = setInterval(tick, 16);
        });
        $("#stop").on("click", function () {
          clearInterval(timer);
          timer = null;
        });
        $("#reset").on("click", function () {
          $("#stop").click();
          $b.css({ left: 0, top: 0 });
          vx = 3;
          vy = 2.5;
        });
      });
    </script>
  </body>
</html>
